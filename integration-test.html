<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Integration Test</title>
    
    <!-- Include all the same styles as main portfolio -->
    <link rel="stylesheet" href="/styles/themes.css">
    <link rel="stylesheet" href="/styles/skills-enhancement.css">
    <link rel="stylesheet" href="/styles/innovative-testimonials.css">
    <link rel="stylesheet" href="/styles/contact-animations.css">
    <link rel="stylesheet" href="/styles/coffee-button.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background: var(--theme-primary);
            color: var(--theme-text);
            min-height: 100vh;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .content {
            position: relative;
            z-index: 1;
            padding: 20px;
            background: var(--theme-background);
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--theme-card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--theme-card-border);
            border-radius: 12px;
            padding: 30px;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: var(--theme-card-bg);
            border-radius: 8px;
            border: 1px solid var(--theme-card-border);
        }
        
        .test-button {
            background: var(--theme-secondary);
            color: var(--theme-primary);
            border: none;
            padding: 12px 24px;
            margin: 8px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            background: var(--theme-accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-success { background: #28a745; }
        .status-warning { background: #ffc107; }
        .status-error { background: #dc3545; }
        .status-info { background: #17a2b8; }
        
        .skills-demo {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .contact-demo {
            max-width: 500px;
            margin: 20px auto;
        }
        
        .contact-demo input, .contact-demo textarea {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border-radius: 6px;
            border: 1px solid var(--theme-card-border);
            background: var(--theme-input-bg);
            color: var(--theme-input-text);
        }
        
        .log-output {
            background: #1a1a1a;
            color: #00ff00;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    
    <div class="content">
        <div class="test-container">
            <h1>🧪 Portfolio Component Integration Test</h1>
            <p>This page tests all portfolio components working together with theme integration.</p>
            
            <!-- Status Section -->
            <div class="test-section">
                <h2>📊 Component Status</h2>
                <div id="component-status">
                    <div id="theme-status">
                        <span class="status-indicator status-info"></span>
                        <strong>Theme Controller:</strong> <span id="theme-status-text">Loading...</span>
                    </div>
                    <div id="skills-status">
                        <span class="status-indicator status-info"></span>
                        <strong>Skills Enhancement:</strong> <span id="skills-status-text">Loading...</span>
                    </div>
                    <div id="contact-status">
                        <span class="status-indicator status-info"></span>
                        <strong>Contact Animations:</strong> <span id="contact-status-text">Loading...</span>
                    </div>
                    <div id="leaves-status">
                        <span class="status-indicator status-info"></span>
                        <strong>Falling Leaves:</strong> <span id="leaves-status-text">Loading...</span>
                    </div>
                    <div id="integration-status">
                        <span class="status-indicator status-info"></span>
                        <strong>Integration System:</strong> <span id="integration-status-text">Loading...</span>
                    </div>
                </div>
            </div>
            
            <!-- Theme Testing -->
            <div class="test-section">
                <h2>🎨 Theme System Test</h2>
                <p>Test theme switching and verify all components respond correctly.</p>
                <button class="test-button" onclick="testThemeSwitch()">
                    <i class="fas fa-palette"></i> Test Theme Switch
                </button>
                <button class="test-button" onclick="toggleTheme()">
                    <i class="fas fa-adjust"></i> Toggle Theme
                </button>
                <div id="theme-info">
                    <p><strong>Current Theme:</strong> <span id="current-theme">Unknown</span></p>
                </div>
            </div>
            
            <!-- Skills Demo -->
            <div class="test-section">
                <h2>💼 Skills Enhancement Demo</h2>
                <p>Hover over skills to see tooltips. All styling should match current theme.</p>
                <div class="skills-demo">
                    <div class="skills-grid">
                        <!-- Skills will be populated by JavaScript -->
                    </div>
                </div>
            </div>
            
            <!-- Contact Form Demo -->
            <div class="test-section">
                <h2>📧 Contact Animation Demo</h2>
                <p>Test contact form animations with theme-aware styling.</p>
                <div class="contact-demo">
                    <form id="test-contact-form">
                        <input type="text" placeholder="Your Name" required>
                        <input type="email" placeholder="Your Email" required>
                        <textarea placeholder="Your Message" rows="4" required></textarea>
                        <button type="submit" class="test-button">
                            <i class="fas fa-paper-plane"></i> Send Test Message
                        </button>
                    </form>
                </div>
                <button class="test-button" onclick="testContactAnimation()">
                    <i class="fas fa-coffee"></i> Test Success Animation
                </button>
            </div>
            
            <!-- Coffee Button Demo -->
            <div class="test-section">
                <h2>☕ Coffee Button Demo</h2>
                <p>Coffee button with theme-aware styling.</p>
                <div style="text-align: center;">
                    <a href="#" class="coffee-button" onclick="event.preventDefault(); logMessage('Coffee button clicked!');">
                        <svg class="coffee-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.5 7h-1V6c0-1.1-.9-2-2-2h-11c-1.1 0-2 .9-2 2v8c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-1h1c1.38 0 2.5-1.12 2.5-2.5S19.88 7 18.5 7zM16 14c0 1.1-.9 2-2 2H8c-1.1 0-2-.9-2-2V6h10v8zm2.5-2.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5z"/>
                        </svg>
                        <span class="coffee-button-text">Buy me a coffee</span>
                    </a>
                </div>
            </div>
            
            <!-- Integration Tests -->
            <div class="test-section">
                <h2>🔧 Integration Tests</h2>
                <p>Comprehensive tests for component integration.</p>
                <button class="test-button" onclick="runAllTests()">
                    <i class="fas fa-play"></i> Run All Tests
                </button>
                <button class="test-button" onclick="testFallingLeaves()">
                    <i class="fas fa-leaf"></i> Test Falling Leaves
                </button>
                <button class="test-button" onclick="clearLog()">
                    <i class="fas fa-trash"></i> Clear Log
                </button>
                
                <div class="log-output" id="test-log">
                    <div>🚀 Integration test system ready...</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Include all scripts -->
    <script src="/scripts/theme-controller.js"></script>
    <script src="/scripts/skills-enhancement.js"></script>
    <script src="/scripts/contact-animations.js"></script>
    <script src="/scripts/coffee-button.js"></script>
    <script src="/scripts/falling-leaves.js"></script>
    <script src="/scripts/component-integration.js"></script>
    
    <script>
        // Test page functionality
        let testLog = [];
        
        function logMessage(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}`;
            testLog.push(logEntry);
            
            const logOutput = document.getElementById('test-log');
            const logDiv = document.createElement('div');
            logDiv.textContent = logEntry;
            logDiv.style.color = type === 'error' ? '#ff6b6b' : 
                               type === 'success' ? '#51cf66' : 
                               type === 'warning' ? '#ffd43b' : '#00ff00';
            logOutput.appendChild(logDiv);
            logOutput.scrollTop = logOutput.scrollHeight;
        }
        
        function clearLog() {
            document.getElementById('test-log').innerHTML = '<div>🚀 Integration test system ready...</div>';
            testLog = [];
        }
        
        function updateStatus(elementId, status, message) {
            const statusEl = document.getElementById(elementId);
            const indicator = statusEl.querySelector('.status-indicator');
            const textEl = statusEl.querySelector('span:last-child');
            
            indicator.className = `status-indicator status-${status}`;
            textEl.textContent = message;
        }
        
        function testThemeSwitch() {
            if (window.componentIntegration) {
                logMessage('🎨 Starting theme switch test...', 'info');
                window.componentIntegration.testThemeSwitch();
                logMessage('✅ Theme switch test completed', 'success');
            } else {
                logMessage('❌ Component integration not available', 'error');
            }
        }
        
        function toggleTheme() {
            if (window.themeController) {
                const currentTheme = window.themeController.currentTheme;
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                window.themeController.setTheme(newTheme);
                logMessage(`🔄 Theme switched from ${currentTheme} to ${newTheme}`, 'success');
                updateCurrentTheme();
            } else {
                logMessage('❌ Theme controller not available', 'error');
            }
        }
        
        function testContactAnimation() {
            if (window.componentIntegration) {
                logMessage('📧 Testing contact animation...', 'info');
                window.componentIntegration.testContactAnimation();
                logMessage('✅ Contact animation test completed', 'success');
            } else {
                logMessage('❌ Component integration not available', 'error');
            }
        }
        
        function testFallingLeaves() {
            if (window.componentIntegration) {
                logMessage('🍃 Testing falling leaves animation...', 'info');
                window.componentIntegration.testFallingLeaves();
                logMessage('✅ Falling leaves test completed', 'success');
            } else {
                logMessage('❌ Component integration not available', 'error');
            }
        }
        
        function runAllTests() {
            logMessage('🚀 Running comprehensive integration tests...', 'info');
            
            setTimeout(() => testThemeSwitch(), 500);
            setTimeout(() => testContactAnimation(), 2000);
            setTimeout(() => testFallingLeaves(), 3500);
            setTimeout(() => {
                logMessage('🎉 All tests completed!', 'success');
            }, 5000);
        }
        
        function updateCurrentTheme() {
            if (window.themeController) {
                document.getElementById('current-theme').textContent = 
                    window.themeController.currentTheme || 'Unknown';
            }
        }
        
        function checkComponentStatus() {
            // Theme Controller
            if (window.themeController) {
                updateStatus('theme-status', 'success', 'Active');
                updateCurrentTheme();
            } else {
                updateStatus('theme-status', 'error', 'Not Found');
            }
            
            // Skills Enhancement
            if (window.skillsEnhancement) {
                updateStatus('skills-status', 'success', 'Active');
            } else {
                updateStatus('skills-status', 'error', 'Not Found');
            }
            
            // Contact Animations
            if (window.contactAnimations) {
                updateStatus('contact-status', 'success', 'Active');
            } else {
                updateStatus('contact-status', 'error', 'Not Found');
            }
            
            // Falling Leaves
            if (window.fallingLeavesAnimation) {
                updateStatus('leaves-status', 'success', 'Active');
            } else {
                updateStatus('leaves-status', 'error', 'Not Found');
            }
            
            // Integration System
            if (window.componentIntegration) {
                const status = window.componentIntegration.getStatus();
                if (status.initialized) {
                    updateStatus('integration-status', 'success', `Active (${status.components.length} components)`);
                } else {
                    updateStatus('integration-status', 'warning', 'Initializing...');
                }
            } else {
                updateStatus('integration-status', 'error', 'Not Found');
            }
        }
        
        // Initialize test page
        document.addEventListener('DOMContentLoaded', () => {
            logMessage('🔧 Test page loaded, checking components...', 'info');
            
            // Check status periodically until all components are loaded
            const statusCheck = setInterval(() => {
                checkComponentStatus();
                
                if (window.componentIntegration && window.componentIntegration.isInitialized) {
                    clearInterval(statusCheck);
                    logMessage('✅ All components loaded and integrated!', 'success');
                }
            }, 500);
            
            // Stop checking after 10 seconds
            setTimeout(() => {
                clearInterval(statusCheck);
                if (!window.componentIntegration || !window.componentIntegration.isInitialized) {
                    logMessage('⚠️ Component integration timeout - some components may not be loaded', 'warning');
                }
            }, 10000);
        });
        
        // Listen for theme changes
        window.addEventListener('themeChanged', (event) => {
            logMessage(`🎨 Theme changed to: ${event.detail.theme}`, 'info');
            updateCurrentTheme();
        });
        
        // Handle test contact form
        document.getElementById('test-contact-form').addEventListener('submit', (e) => {
            e.preventDefault();
            logMessage('📧 Test form submitted (prevented actual submission)', 'info');
            testContactAnimation();
        });
    </script>
</body>
</html>